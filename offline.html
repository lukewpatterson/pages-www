---
permalink: offline/
---
<!DOCTYPE html>
<html>
<head>
	<title>stay standalone</title>
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="viewport" content="width=device-width,initial-scale=1.5,user-scalable=no">
	<script type="text/javascript">
		(function(document,navigator,standalone) {
			// prevents links from apps from oppening in mobile safari
			// this javascript must be the first script in your <head>
			if ((standalone in navigator) && navigator[standalone]) {
				var curnode, location=document.location, stop=/^(a|html)$/i;
				document.addEventListener('click', function(e) {
					curnode=e.target;
					while (!(stop).test(curnode.nodeName)) {
						curnode=curnode.parentNode;
					}
					// Condidions to do this only on links to your own app
					// if you want all links, use if('href' in curnode) instead.
					if(
						'href' in curnode && // is a link
						(chref=curnode.href).replace(location.href,'').indexOf('#') && // is not an anchor
						(	!(/^[a-z\+\.\-]+:/i).test(chref) ||                       // either does not have a proper scheme (relative links)
							chref.indexOf(location.protocol+'//'+location.host)===0 ) // or is in the same protocol and domain
					) {
						e.preventDefault();
						location.href = curnode.href;
					}
				},false);
			}
		})(document,window.navigator,'standalone');
	</script>
</head>
<body>
	<p><a href="http://google.com/">google</a></p>
	<script type="text/javascript" charset="utf-8">
		// NEVER user document.write, unless for test porposes.
		document.write('<p><a href="http://'+document.location.host+'/test/">Same domain</a></p>')
	</script>
	<p><a href="/test/"><span>absolute path</span></a></p>
	<p><a href="javascript:alert('alerts should work')">alert</a></p>
	<p><a href="test_page.html">relative path</a></p>
	<p><a href="/test?http://othersite.com">http not on beginning</a></p>
	<p><a href="#test">anchor</a></p>
	<p><a href="tel:+1234512345">This link fires a call</a></p>
	<p><a href="mailto:me@example.com">Mailto</a></p>
	<p><a href="../offline2">offline2</a></p>
</body>
</html>
